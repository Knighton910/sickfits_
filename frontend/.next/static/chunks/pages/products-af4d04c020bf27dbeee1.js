(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{2206:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return k}});var t=r(5893);var o,i=r(655),a=r(7294),u=r(2152),s=r(4273),l=r(1498),c=r(5942),d=r(2714);!function(e){e[e.Query=0]="Query",e[e.Mutation=1]="Mutation",e[e.Subscription=2]="Subscription"}(o||(o={}));var p=new Map;function f(e){var n;switch(e){case o.Query:n="Query";break;case o.Mutation:n="Mutation";break;case o.Subscription:n="Subscription"}return n}function v(e,n){var r=function(e){var n,r,t=p.get(e);if(t)return t;__DEV__?(0,d.kG)(!!e&&!!e.kind,"Argument of ".concat(e," passed to parser was not a valid GraphQL ")+"DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document"):(0,d.kG)(!!e&&!!e.kind,30);var i=e.definitions.filter((function(e){return"FragmentDefinition"===e.kind})),a=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"query"===e.operation})),u=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})),s=e.definitions.filter((function(e){return"OperationDefinition"===e.kind&&"subscription"===e.operation}));__DEV__?(0,d.kG)(!i.length||a.length||u.length||s.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"):(0,d.kG)(!i.length||a.length||u.length||s.length,31),__DEV__?(0,d.kG)(a.length+u.length+s.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+"".concat(e," had ").concat(a.length," queries, ").concat(s.length," ")+"subscriptions and ".concat(u.length," mutations. ")+"You can use 'compose' to join multiple operation types to a component"):(0,d.kG)(a.length+u.length+s.length<=1,32),r=a.length?o.Query:o.Mutation,a.length||u.length||(r=o.Subscription);var l=a.length?a:u.length?u:s;__DEV__?(0,d.kG)(1===l.length,"react-apollo only supports one definition per HOC. ".concat(e," had ")+"".concat(l.length," definitions. ")+"You can use 'compose' to join multiple operation types to a component"):(0,d.kG)(1===l.length,33);var c=l[0];n=c.variableDefinitions||[];var f={name:c.name&&"Name"===c.name.kind?c.name.value:"data",type:r,variables:n};return p.set(e,f),f}(e),t=f(n),i=f(r.type);__DEV__?(0,d.kG)(r.type===n,"Running a ".concat(t," requires a graphql ")+"".concat(t,", but a ").concat(i," was used instead.")):(0,d.kG)(r.type===n,34)}function h(e,n){var r,t=(0,a.useContext)((0,s.K)()),p=function(e){var n=(0,a.useContext)((0,s.K)()),r=e||n.client;return __DEV__?(0,d.kG)(!!r,'Could not find "client" in the context or passed in as an option. Wrap the root component in an <ApolloProvider>, or pass an ApolloClientApolloClient instance in via options.'):(0,d.kG)(!!r,29),r}(null===n||void 0===n?void 0:n.client);v(e,o.Query);var f,h=(0,a.useState)((function(){var r=g(e,n),o=null;return t.renderPromises&&(o=t.renderPromises.getSSRObservable(r)),o||(o=p.watchQuery(r),t.renderPromises&&t.renderPromises.registerSSRObservable(o,r)),t.renderPromises&&!1!==(null===n||void 0===n?void 0:n.ssr)&&!(null===n||void 0===n?void 0:n.skip)&&o.getCurrentResult().loading&&t.renderPromises.addQueryPromise({getOptions:function(){return g(e,n)},fetchData:function(){return new Promise((function(e){var n=o.subscribe({next:function(r){r.loading||(e(),n.unsubscribe())},error:function(){e(),n.unsubscribe()},complete:function(){e()}})}))}},(function(){return null})),o})),b=h[0],y=h[1],m=(0,a.useState)((function(){var e,r,t=b.getCurrentResult();return!t.loading&&n&&(t.error?null===(e=n.onError)||void 0===e||e.call(n,t.error):t.data&&(null===(r=n.onCompleted)||void 0===r||r.call(n,t.data))),t})),k=m[0],_=m[1],P=(0,a.useRef)({client:p,query:e,options:n,result:k,previousData:void 0,watchQueryOptions:g(e,n)});(0,a.useEffect)((function(){var r,t,o,i=g(e,n);if(P.current.client===p&&(0,u.D)(P.current.query,e))(0,u.D)(P.current.watchQueryOptions,i)||(b.setOptions(i).catch((function(){})),o=b.getCurrentResult(),P.current.watchQueryOptions=i);else{var a=p.watchQuery(i);y(a),o=a.getCurrentResult()}if(o){var s=P.current.result;s.data&&(P.current.previousData=s.data),_(P.current.result=o),!o.loading&&n&&(k.loading||(k.error?null===(r=n.onError)||void 0===r||r.call(n,k.error):k.data&&(null===(t=n.onCompleted)||void 0===t||t.call(n,k.data))))}Object.assign(P.current,{client:p,query:e,options:n})}),[b,p,e,n]),(0,a.useEffect)((function(){if(!t.renderPromises){var e=b.subscribe(n,(function r(t){var o,i,a=b.last;e.unsubscribe();try{b.resetLastResults(),e=b.subscribe(n,r)}finally{b.last=a}if(!t.hasOwnProperty("graphQLErrors"))throw t;var s=P.current.result;(s&&s.loading||!(0,u.D)(t,s.error))&&(_(P.current.result={data:s.data,error:t,loading:!1,networkStatus:c.I.error}),null===(i=null===(o=P.current.options)||void 0===o?void 0:o.onError)||void 0===i||i.call(o,t))}));return function(){return e.unsubscribe()}}function n(){var e,n,r=P.current.result,t=b.getCurrentResult();r&&r.loading===t.loading&&r.networkStatus===t.networkStatus&&(0,u.D)(r.data,t.data)||(r.data&&(P.current.previousData=r.data),_(P.current.result=t),t.loading||null===(n=null===(e=P.current.options)||void 0===e?void 0:e.onCompleted)||void 0===n||n.call(e,t.data))}}),[b,t.renderPromises,p.disableNetworkFetches]),f=(r=k).partial,k=(0,i._T)(r,["partial"]),!f||!(null===n||void 0===n?void 0:n.partialRefetch)||k.loading||k.data&&0!==Object.keys(k.data).length||"cache-only"===b.options.fetchPolicy||(k=(0,i.pi)((0,i.pi)({},k),{loading:!0,networkStatus:c.I.refetch}),b.refetch()),t.renderPromises&&!1!==(null===n||void 0===n?void 0:n.ssr)&&!(null===n||void 0===n?void 0:n.skip)&&k.loading&&b.setOptions(g(e,n)).catch((function(){})),(t.renderPromises||p.disableNetworkFetches)&&!1===(null===n||void 0===n?void 0:n.ssr)?k=P.current.result={loading:!0,data:void 0,error:void 0,networkStatus:c.I.loading}:((null===n||void 0===n?void 0:n.skip)||"standby"===(null===n||void 0===n?void 0:n.fetchPolicy))&&(k={loading:!1,data:void 0,error:void 0,networkStatus:c.I.ready}),k.errors&&k.errors.length&&(k=(0,i.pi)((0,i.pi)({},k),{error:k.error||new l.c({graphQLErrors:k.errors})}));var w=(0,a.useMemo)((function(){return{refetch:b.refetch.bind(b),fetchMore:b.fetchMore.bind(b),updateQuery:b.updateQuery.bind(b),startPolling:b.startPolling.bind(b),stopPolling:b.stopPolling.bind(b),subscribeToMore:b.subscribeToMore.bind(b)}}),[b]);return(0,i.pi)((0,i.pi)((0,i.pi)({},w),{variables:b.variables,client:p,called:!0,previousData:P.current.previousData}),k)}function g(e,n){var r;void 0===n&&(n={});var t=n.skip,o=(n.ssr,n.onCompleted,n.onError,n.displayName,(0,i._T)(n,["skip","ssr","onCompleted","onError","displayName"]));return t?o.fetchPolicy="standby":(!(null===(r=o.context)||void 0===r?void 0:r.renderPromises)||"network-only"!==o.fetchPolicy&&"cache-and-network"!==o.fetchPolicy)&&o.fetchPolicy||(o.fetchPolicy="cache-first"),(0,i.pi)({query:e},o)}function b(){var e,n,r=(e=["\n  # Write your query or mutation here\n  query ALL_PRODUCTS_QUERY {\n    allProducts {\n      id\n      name\n      price\n      description\n      photo {\n        id\n        image {\n          publicUrlTransformed\n        }\n      }\n    }\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return b=function(){return r},r}var y=(0,r(7521).ZP)(b());function m(){var e=h(y),n=e.data,r=e.error,o=e.loading;return console.log(n,r,o),o?(0,t.jsx)("p",{children:"Loading..."}):(0,t.jsx)("div",{children:(0,t.jsx)("p",{children:"Products!!"})})}function k(){return(0,t.jsx)("div",{children:(0,t.jsx)(m,{})})}},6141:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(2206)}])}},function(e){e.O(0,[774,888,179],(function(){return n=6141,e(e.s=n);var n}));var n=e.O();_N_E=n}]);